
/*!
 * jQuery One Page Nav Plugin
 * https://github.com/davist11/jQuery-One-Page-Nav
 */
!function(t,i,n,e){"use strict";var o=function(n,o){this.elem=n,this.$elem=t(n),this.options=o,this.metadata=this.$elem.data("plugin-options"),this.$win=t(i),this.sections={},this.didScroll=!1,this.$doc=t(document),this.docHeight=this.$doc.height()};o.defaults={navItems:"a",currentClass:"current",changeHash:!1,easing:"swing",filter:"",scrollSpeed:750,scrollThreshold:.5,begin:null,end:null,scrollChange:null},o.prototype.init=function(){var n=this;n.config=t.extend({},o.defaults,n.options,n.metadata),n.$nav=n.$elem.find(n.config.navItems),""!==n.config.filter&&(n.$nav=n.$nav.filter(n.config.filter)),n.$nav.on("click.onePageNav",function(i){n.clearTimer();var e=t(this),o=e.attr("href"),s=t(o);o.match(/^#/)&&s.length&&(i.preventDefault(),n.scrollTo(s),n.setActive(e))}),n.getPositions(),n.bindInterval(),n.$win.on("resize.onePageNav",function(){n.getPositions(),n.docHeight=n.$doc.height()})},o.prototype.adjustNav=function(t){var i=this,e=null;e=i.config.filter?i.$nav.filter(function(){return t===t(this).attr("href")}):i.$nav.filter("[href='"+t+"']"),i.setActive(e)},o.prototype.bindInterval=function(){var t=this;t.timer=setInterval(function(){t.didScroll&&(t.didScroll=!1,t.scrollChange())},250)},o.prototype.clearTimer=function(){clearInterval(this.timer)},o.prototype.getPositions=function(){var i=this,n=function(t){return Math.round(t.offset().top)};i.$nav.each(function(){var e=t(this).attr("href"),o=t(e);e.match(/^#/)&&o.length&&(i.sections[e]=n(o))})},o.prototype.scrollChange=function(){var t=this.$win.scrollTop(),i=this.docHeight-this.$win.height(),n=this.config.scrollThreshold;if(t>=i)return this.setActive(this.$nav.last());for(var e in this.sections)if(this.sections.hasOwnProperty(e)&&this.sections[e]>=t-n*this.$win.height()){this.setActive(this.$nav.filter("[href='"+e+"']"));break}},o.prototype.scrollTo=function(t){var i=this;var n=t.offset().top;var e=i.config.scrollSpeed,o=i.config.easing;i.config.changeHash&&history.pushState&&history.pushState(null,null,t.selector),i.config.begin&&i.config.begin(),i.$win.off("scroll.onePageNav"),i.$("html, body").stop().animate({scrollTop:n},e,o,function(){i.config.end&&i.config.end(),i.bindInterval()})},o.prototype.setActive=function(t){var i=this;t.hasClass(i.config.currentClass)||(i.$nav.removeClass(i.config.currentClass),t.addClass(i.config.currentClass))},o.prototype.destroy=function(){this.clearTimer(),this.$nav.off(".onePageNav"),this.$win.off(".onePageNav"),this.$elem.removeData("plugin_onePageNav")},t.fn.onePageNav=function(t){return this.each(function(){new o(this,t).init()})}}(jQuery,window,document);
